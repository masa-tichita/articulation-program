---
marp: true
theme: base
paginate: true
math: katex

---
<!--_class: lead-->
## 日立北第1班 
## スマホのアプリ配置問題 part2

---
<!--_header: 定式化-->
### 問題設定
スマホアプリの配置を最適化したい！

### 満たしたい条件
- 画面の中から使いたいアプリをすぐに見つけられるようにしたい
- 見栄えも重視したい(きれいに見える配置にしたい)



---
<!--_header: 言語化-->
### 問題の言語化
**使いたいアプリをすぐに見つけられることに対する定義**
1. 見つけやすさ(視線誘導)
  - スマホにおける視線誘導パターンを定義
  - さらに視線誘導パターンを定量的に評価
2. 見つけやすさ(整理)
  - アプリ配置やフォルダ作成
  - 脳科学的に3パターンに分けられる
    - **運動系、思考系、伝達系が弱い人**
      - アルファベット順に並べる
    - **視覚系、理解系、聴覚系が弱い人**
      - 仕事、ゲーム、ヘルスケアなどフォルダのカテゴリを決めることが重要
    - **記憶系、感情系が弱い人**
      - 普段使わないアプリをまとめて1つのフォルダに入れる




---
<!--_header: 言語化-->
### 問題の言語化についてのまとめ
**使いたいアプリをすぐに見つけられること≒見栄えの良さ**
1. 視線誘導パターン
2. 整理


---
<!--_header: 定式化-->
### 視線誘導パターン
**Z形（Diamond Pattern）パターン**

![center height:450px](../../slide/or/kodai-renkei/image-2.png)
- 右上、左下に重要なものを置くように重みづけを行うことにする。


---
<!--_header: 定式化-->
### 集合 (Sets)

-   $I$: ホーム画面上の配置候補点の集合
-   $J$: アプリの集合
-   $C$: アプリの色集合
-   $S$: アプリの色の濃淡集合(色の濃淡を3段階で定義する) 
    - $S = \{s_1, s_2, s_3\}$
    - 濃、薄、普通の3段階


---
<!--_header: 定式化-->
### パラメータ (Parameters)

-   $w_i$: 場所$i$の価値（視線誘導・アクセスしやすさに基づく重み）
-   $p_j$: アプリ$j$の使用頻度
-   $M$: 十分に大きな定数（例：全アプリ数 $|J|$）
-   $a_{jc} \in \{0,1\}$: アプリ$j$が色$c$である場合に1
-   $b_{js} \in \{0,1\}$: アプリ$j$が濃淡$s$である場合に1

- $d_{ik}$: 場所$i$と場所$k$の物理的な距離

- $D_{min}$: 同じ特徴を持つアプリ間に確保したい最低距離



---
<!--_header: 定式化-->
### 決定変数 (Decision Variables)

-   $x_{ij} \in \{0, 1\}$: アプリ$j$を場所$i$に直接配置する場合に 1


### 目的関数 (Objective Function)

**目的関数(ベース)**

$$
\text{maximize} \quad \sum_{i \in I} \sum_{j \in J} w_i \cdot p_j \cdot x_{ij}
$$

**目的関数(色についてのペナルティ追加版)**
$$
\text{maximize} \quad \sum_{i \in I} \sum_{j \in J} w_i p_j x_{ij} - 
\sum_{c \in C}\sum_{i,k \in I}\sum_{j,l \in J} P_c \cdot \frac{1}{d_{ik}} \cdot (x_{ij} \cdot x_{kl} \cdot a_{jc} \cdot a_{lc}) \\
\sum_{s \in S}\sum_{i,k \in I}\sum_{j,l \in J} P_s \cdot \frac{1}{d_{ik}} \cdot (x_{ij} \cdot x_{kl} \cdot b_{js} \cdot b_{ls})
$$



---
<!--_header: 定式化-->
### 制約条件 (Constraints)

**アプリからみた制約**: 
各アプリは、必ず「画面上の1地点」または「1つのフォルダ」のいずれかに属する。
$$
\forall j \in J: \quad \sum_{i \in I} x_{ij} \leq 1
$$

**場所候補から見た制約**: 
各地点には、1つのアプリまたは1つのフォルダしか置けない。
$$
\forall i \in I: \quad \sum_{j \in J} x_{ij} \le 1
$$



---
<!--_header: 定式化-->
### 目的関数の線形化

**追加制約**:
$$
\begin{cases}
y_{ijkl} \le x_{ij} \\
y_{ijkl} \le x_{kl} \\
y_{ijkl} \ge x_{ij} + x_{kl} - 1
\end{cases}
$$

**線形化された最終目的関数**

$$
\text{maximize} \quad \sum_{i,j} w_i p_j x_{ij} \\ 
\sum_{c,i,k,j,l} P_c \cdot \frac{1}{d_{ik}} \cdot a_{jc} \cdot a_{lc} \cdot y_{ijkl} \\ 
\sum_{s,i,k,j,l} P_s \cdot \frac{1}{d_{ik}} \cdot b_{js} \cdot b_{ls} \cdot y_{ijkl}
$$